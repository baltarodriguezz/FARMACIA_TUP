<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Administrar Ventas - Farmacia Luz</title>
  <link rel="stylesheet" href="../assets/output.css" />
</head>
<body class="bg-gray-100 flex min-h-screen font-sans">

  <!-- 游댳 SIDEBAR -->
  <aside class="w-64 bg-[#275c74] text-white flex flex-col justify-between">
    <div>
      <div class="p-6 border-b border-white/20">
        <h2 class="text-2xl font-bold text-center">Admin Farmacia</h2>
      </div>
      <nav class="flex flex-col gap-2 p-4">
        <a href="index.html" class="py-2 px-3 rounded hover:bg-[#12b1be] transition">游 Dashboard</a>
        <a href="productos.html" class="py-2 px-3 rounded hover:bg-[#12b1be] transition">游빖 Productos</a>
        <a href="clientes.html" class="py-2 px-3 rounded hover:bg-[#12b1be] transition">游논 Clientes</a>
        <a href="ventas.html" class="py-2 px-3 bg-[#12b1be] rounded font-semibold">游 Ventas</a>
      </nav>
    </div>
    <div class="p-4 text-center border-t border-white/20 text-sm opacity-80">
      춸 2025 Farmacia Luz
    </div>
  </aside>

  <!-- 游댳 CONTENIDO PRINCIPAL -->
  <main class="flex-1 p-8">

    <!-- Encabezado -->
    <div class="flex justify-between items-center mb-8">
      <h1 class="text-3xl font-bold text-[#275c74]">Gesti칩n de Ventas</h1>
    </div>

    <!-- Tabla de ventas -->
    <div class="overflow-x-auto bg-white rounded-xl shadow-md">
      <table class="min-w-full border-collapse text-sm text-left">
        <thead class="bg-[#275c74] text-white">
          <tr>
            <th class="p-3">ID Venta</th>
            <th class="p-3">Cliente</th>
            <th class="p-3">Fecha</th>
            <th class="p-3">Total</th>
            <th class="p-3">Acciones</th>
          </tr>
        </thead>
        <tbody id="tablaVentas" class="divide-y">
          <!-- Filas generadas din치micamente -->
        </tbody>
      </table>
    </div>

    <!-- Modal Detalle Venta -->
    <div id="modalDetalle" class="hidden fixed inset-0 bg-black/40 flex items-center justify-center z-50">
      <div class="bg-white rounded-xl p-6 w-[500px] shadow-xl max-h-[80vh] overflow-y-auto">
        <h2 class="text-xl font-bold text-[#275c74] mb-4">Detalle de Venta</h2>
        <div id="detalleVenta"></div>
        <div class="flex justify-end mt-4">
          <button id="btnCerrarDetalle" class="bg-[#12b1be] hover:bg-[#0e9ca9] text-white px-4 py-2 rounded">
            Cerrar
          </button>
        </div>
      </div>
    </div>

  </main>

  <!-- 游댳 SCRIPT -->
  <script>
    const ventas = [
      {
        id: 101,
        cliente: "Juan P칠rez",
        fecha: "2025-11-10",
        total: 15800,
        detalle: [
          { producto: "Ibuprofeno 400mg", cantidad: 2, precio: 2500 },
          { producto: "Paracetamol 500mg", cantidad: 3, precio: 1900 }
        ]
      },
      {
        id: 102,
        cliente: "Mar칤a G칩mez",
        fecha: "2025-11-09",
        total: 9700,
        detalle: [
          { producto: "Omeprazol 20mg", cantidad: 1, precio: 3200 },
          { producto: "Ibuprofeno 400mg", cantidad: 2, precio: 2500 }
        ]
      },
      {
        id: 103,
        cliente: "Luc칤a Fern치ndez",
        fecha: "2025-11-08",
        total: 13200,
        detalle: [
          { producto: "Vitamina C 500mg", cantidad: 4, precio: 3300 }
        ]
      }
    ];

    const tabla = document.getElementById("tablaVentas");
    const modal = document.getElementById("modalDetalle");
    const btnCerrar = document.getElementById("btnCerrarDetalle");
    const detalleVenta = document.getElementById("detalleVenta");

    function renderVentas() {
      tabla.innerHTML = "";
      ventas.forEach(v => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td class="p-3">${v.id}</td>
          <td class="p-3">${v.cliente}</td>
          <td class="p-3">${v.fecha}</td>
          <td class="p-3 text-[#12b1be] font-semibold">$${v.total}</td>
          <td class="p-3">
            <button onclick="verDetalle(${v.id})" class="text-blue-600 hover:underline">Ver Detalle</button>
          </td>
        `;
        tabla.appendChild(tr);
      });
    }

    window.verDetalle = (id) => {
      const venta = ventas.find(v => v.id === id);
      if (!venta) return;

      let html = `
        <p class="mb-2"><span class="font-semibold text-[#275c74]">Cliente:</span> ${venta.cliente}</p>
        <p class="mb-2"><span class="font-semibold text-[#275c74]">Fecha:</span> ${venta.fecha}</p>
        <p class="mb-4"><span class="font-semibold text-[#275c74]">Total:</span> $${venta.total}</p>
        <h3 class="text-lg font-semibold text-[#275c74] mb-2">Productos:</h3>
        <table class="w-full text-sm border border-gray-200">
          <thead class="bg-gray-100">
            <tr>
              <th class="p-2 border">Producto</th>
              <th class="p-2 border">Cantidad</th>
              <th class="p-2 border">Precio Unitario</th>
              <th class="p-2 border">Subtotal</th>
            </tr>
          </thead>
          <tbody>
      `;

      venta.detalle.forEach(d => {
        html += `
          <tr>
            <td class="p-2 border">${d.producto}</td>
            <td class="p-2 border text-center">${d.cantidad}</td>
            <td class="p-2 border text-center">$${d.precio}</td>
            <td class="p-2 border text-center">$${d.precio * d.cantidad}</td>
          </tr>
        `;
      });

      html += `</tbody></table>`;
      detalleVenta.innerHTML = html;
      modal.classList.remove("hidden");
    };

    btnCerrar.addEventListener("click", () => modal.classList.add("hidden"));

    renderVentas();
  </script>

</body>
</html>
